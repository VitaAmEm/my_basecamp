<h1>All Projects</h1>

<%= link_to "Create New Project", new_project_path, class: "btn" %>

<table border="1">
  <thead>
    <tr>
      <th>Name</th>
      <th>Owner</th>
      <th>Description</th>
      <th>Created</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td><strong><%= project.name %></strong></td>
        <td><%= project.user.name %></td>
        <td><%= truncate(project.description, length: 50) %></td>
        <td><%= project.created_at.strftime("%b %d, %Y") %></td>
        <td>
          <%= link_to "View", project_path(project) %>
          <% if project.user == current_user || current_user&.admin? %>
            <%= link_to "Edit", edit_project_path(project) %>
            <%= link_to "Delete", project_path(project), method: :delete, data: { confirm: "Are you sure?" } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>